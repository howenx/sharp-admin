@import play.i18n._
@(lang:String="cn",pageSize:Integer, countNum:Integer, pageCount:Integer, user:domain.User)
@scripts = {
<link rel="stylesheet" href="/assets/css/bootstrap.min.css" >
<link rel="stylesheet" href="/assets/css/bootstrap-datetimepicker1.css"/>
<link rel="stylesheet" href="/assets/css/search.css">
<link rel="stylesheet" href="/assets/css/slider.css">
<link rel="stylesheet" href="/assets/css/salesdata.css">
<script src="/assets/js/bootstrap.min.js"></script>
<script src="/assets/js/moment-with-locales.js"></script>
<script src="/assets/js/bootstrap-datetimepicker1.js"></script>

<!-- 此为调用分页所提供的函数名前缀 -->
<script>window.search_args = 'salesData'</script>
<!--分页-->
<link href="/assets/css/myPage.css" rel="stylesheet" type="text/css" />
<script src="/assets/js/jqPaginator.min.js" type="text/javascript"></script>
<script src="/assets/js/search.js"></script>
}

@import java.lang.String; val title="销售数据"

@layout(lang=lang, title=title,user=user)(scripts) {
<div class="mbread">
    <div class="bread-path">
        <span class="index">@Messages.get(new Lang(Lang.forCode(lang)),"page.head.path.title")</span>
        <a href="/@lang/summary"><span class="current">@Messages.get(new Lang(Lang.forCode(lang)),"nav.home")</span></a>
        <span class="icon-path">&gt;</span>
        <span class="current">@Messages.get(new Lang(Lang.forCode(lang)),"nav.data.sell")</span>
        <span class="icon-path">&gt;</span>
        <span>销售数据</span>
    </div>
</div>
<div class="content-1">
    <div class="page-title">
        <span class="title-name">销售数据</span>
    </div>
    <div class="row" style="height: 100%;padding-left: 15px">
        <div class="col-sm-2" style="height: 100%;padding: 0">
            <ul class="table-nav">
                <li>销售收入统计</li>
                <li>商品销售情况</li>
                <li>商品销售排行</li>
            </ul>
            <input type="hidden" id="param">
        </div>
        <div class="col-sm-10">
            <form class="form-horizontal">
                <h3 class="table-h3">销售收入统计</h3>
                <div class="form-group">
                    <!--时间范围-->
                    <label class="col-sm-2 control-label">时间范围</label>
                    <div class="col-sm-5">
                        <div id="datetimepicker-starttime" class="input-group date" style="width: 45%;float:left">
                            <input id = "topic-form-starttime" class="form-control col-sm-2"  type="text">
                            <span class="input-group-addon"><span class="glyphicon glyphicon-calendar"></span></span>
                        </div>
                        <span style="line-height: 34px;float: left;width: 10%;text-align: center">至</span>
                        <div id="datetimepicker-endtime" class="input-group date" style="width: 45%;float:right">
                            <input id = "topic-form-endtime" class="form-control col-sm-2"  type="text">
                            <span class="input-group-addon"><span class="glyphicon glyphicon-calendar"></span></span>
                        </div>
                    </div>
                    <div class="col-sm-4" style="line-height: 34px">
                        <button type="button" class="btn btn-primary btn-xs choose">确定</button>
                        <button type="button" class="btn btn-xs yesterday">昨日</button>
                        <button type="button" class="btn btn-xs today">今日</button>
                        <button type="button" class="btn btn-xs benzhou">本周</button>
                        <button type="button" class="btn btn-xs benyue">本月</button>
                        <input type="hidden" id="topic-search-bt">
                    </div>
                </div>
                <!--统计结果数据-->
                <div class="form-group">
                    <div class="col-sm-12 money">
                        <div id="money-1"></div>
                        <div id="money-2"></div>
                        <div id="money-3"></div>
                    </div>
                </div>
                <!--表格-->
                <div>
                    <div class="generate-table">
                        <a id="report" class="btn btn-primary">生成报表</a>
                        <span id="notice" style="margin-top:-25px; margin-left:200px;width:200px;"></span>
                    </div>
                    <div class="tablenum one">
                        <!--id必须为tb-topic 公用js需要使用-->
                        <table class="table table-striped table-hover">
                            <thead>
                            <tr>
                                <th>日期</th>
                                <th>订单号</th>
                                <th>交易金额</th>
                                <th>订单类型</th>
                                <th>交易流水号</th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr class="nodata-td" style="display:none;"><td colspan="5">@Messages.get(new Lang(Lang.forCode(lang)),"themes.search.nodata")</td></tr>
                            </tbody>
                        </table>
                    </div>
                    <div class="tablenum">
                        <table class="table table-striped table-hover">
                            <thead>
                            <tr>
                                <th>日期</th>
                                <th>订单成交量</th>
                                <th>订单成交额</th>
                                <th>商品退换量</th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr class="nodata-td" style="display:none;"><td colspan="4">@Messages.get(new Lang(Lang.forCode(lang)),"themes.search.nodata")</td></tr>
                            </tbody>
                        </table>
                    </div>
                    <div class="tablenum">
                        <table class="table table-striped table-hover">
                            <thead>
                            <tr>
                                <th style="width: 5%;text-align: center;vertical-align: middle;">排名</th>
                                <th style="width: 20%;text-align: center;vertical-align: middle;">商品名称+规格</th>
                                <th style="width: 5%;text-align: center;vertical-align: middle;">销售额</th>
                                <th style="width: 5%;text-align: center;vertical-align: middle;">销售量</th>
                                <th style="width: 5%;text-align: center;vertical-align: middle;">退换量</th>
                                <th style="width: 15%;text-align: center;vertical-align: middle;">商品编号</th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr class="nodata-td" style="display:none;"><td colspan="6">@Messages.get(new Lang(Lang.forCode(lang)),"themes.search.nodata")</td></tr>
                            </tbody>
                        </table>
                    </div>
                </div>
                <!-- 公用分页模块,直接拷贝,传入相应的字段即可-->
                <p class="page-toolbar-title">@Messages.get(new Lang(Lang.forCode(lang)), "themes.search.table.page.toolbar", countNum, pageSize, pageCount)</p>
                <ul class="pagination" id="pagination">
                    <input type="hidden" value="@pageCount" id="pagecount">
                </ul>
                <!-- 公用模块,直接拷贝-->
            </form>
        </div>
    </div>
</div>

<script>
    $(function() {
        $("#report").click(function () {
            var isPost = true;
            var parm = $("#param").val();
            var startTime = $("#topic-form-starttime").val();
            var endTime = $("#topic-form-endtime").val();
            if (parm==null || parm =="" || startTime==null || startTime=="" || endTime==null || endTime=="") {
                isPost = false;
            }
            var obj = new Object();
            var Order = new Object();
            Order.startTime = startTime;
            Order.endTime = endTime;
            obj.order = Order;
            obj.param = parm;
            if (isPost) {
                console.log(JSON.stringify(obj));
                $.ajax({
                    type :  "POST",
                    url : "/sales/report",
                    contentType: "application/json; charset=utf-8",
                    data : JSON.stringify(obj),
                    <!--error : function(request) {-->
                        <!--$('#notice').text('报表导出失败').css('color', '#c00');-->
                        <!--setTimeout("$('#notice').text('')", 2000);-->
                    <!--},-->
                    <!--success: function(data) {-->
                        <!--$('#notice').text("报表导出成功").css('color', '#2fa900');-->
                        <!--setTimeout("$('#notice').text('')", 2000);-->
                    <!--}-->
                });
            }
        });
    });
</script>


}