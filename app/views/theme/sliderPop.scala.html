@(themeList:List[entity.Theme], inventoryList:List[entity.Inventory],pinList:List[Array[Object]], url:String)
<!doctype html>
<html lang="en">
<head>
        <meta charset="UTF-8">
        <title>选择主题或商品</title>
        <link rel="shortcut icon" type="image/png" href="/assets/images/favicon.ico">
        <link rel="stylesheet" href="/assets/css/bootstrap.min.css" >
        <script src="/assets/js/jquery.min.js"></script>
        <link rel="stylesheet" href="/assets/css/search.css" >
        <script>
        $(function(){
            var sharedObject = window.dialogArguments;
            var targetType = "D";
            /**	变换选择显示主题列表或商品列表 **/
            $(".switch").click(function(){
                $(".switch").css("background","#fff");
                $(this).css("background","#ccc");
                $("table").css("display","none");
                $(".table").eq($(this).index($(".switch"))).css("display","table");
                if($(this).children().html()=="主题选择") targetType = "T";
            });

            /** 点击单选按钮选择主题或商品 **/
            $(".table input[type=radio]").click(function(){
                var itemId=$("input[type=radio]:checked").parent().next().html();
                var skuId=$("input[type=radio]:checked").parent().next().next().html();
                sharedObject.itemId = itemId;
                sharedObject.skuId = skuId;
                sharedObject.targetType = targetType;
                if (window.showModalDialog) {
                    window.returnValue = sharedObject;
                }
                else {
                    // if not modal, we cannot use the returnValue property, we need to update the opener window
                    window.opener.UpdateFields (sharedObject);
                }
                window.close ();
            });

            /**	点击排序方式 **/
            $(".sort-topic").click(function(e) {
                if ($(this).hasClass("glyphicon-chevron-up")) {
                    $(this).removeClass("glyphicon-chevron-up");
                    $(this).addClass("glyphicon-chevron-down");
                } else {
                    $(this).removeClass("glyphicon-chevron-down");
                    $(this).addClass("glyphicon-chevron-up");
                }
            });

            /**	图片放大和关闭 **/
            $(document).on("click", ".main-img", function(e) {
                $(".goods-img-bg").css({
                    "height": $(window).height(),
                    "display": "block"
                });
                $(".goods-img").css("left", ($(window).width() - 1200) / 2);
                $(this).clone().appendTo($(".goods-img")).css({
                    "width": "50%",
                    "height": "500px",
                    "margin-left": "300px",
                    "z-index": 1000
                });
            })
            $(document).on("click", ".goods-img-bg .close", function(e) {
                $(".goods-img-bg img").remove();
                $(".goods-img-bg").css({
                    "display": "none"
                });
            })
            $(document).on("click", ".goods-bg", function(e) {
                $(".goods-img-bg img").remove();
                $(".goods-img-bg").css({
                    "display": "none"
                });
            })
        })
    </script>
</head>
<body>
<div class="table-two clearfix">
    <div class="goods-table pull-left switch"><span>商品选择</span></div>
    <div class="theme-table pull-left switch"><span>主题选择</span></div>
        <!--SKU-->
        <table class="table table-bordered table-hover table-goods">
            <tr>
                <th>选择商品</th>
                <th>商品ID<span class="sort-topic glyphicon glyphicon-chevron-up"></span></th>
                <th>SKU ID<span class="sort-topic glyphicon glyphicon-chevron-up"></span></th>
                <th>商品标题</th>
                <th>SKU主图</th>
                <th>上架时间<span class="sort-topic glyphicon glyphicon-chevron-up"></span></th>
                <th>下架时间<span class="sort-topic glyphicon glyphicon-chevron-up"></span></th>
                <th>SKU状态</th>
                <th>现价(￥)<span class="sort-topic glyphicon glyphicon-chevron-up"></span></th>
                <th>原价(￥)<span class="sort-topic glyphicon glyphicon-chevron-up"></span></th>
                <th>折扣(￥)<span class="sort-topic glyphicon glyphicon-chevron-up"></span></th>
            </tr>
            @for(inv <- inventoryList) {
            <tr>
                <td><input type="radio" name="selectItem"></td>
                <td>@inv.getItemId()</td>
                <td>@inv.getId()</td>
                <td>@inv.getInvTitle()</td>
                <td><img class="main-img" src='@url@inv.getInvImg().toString.substring(1,inv.getInvImg().toString.length-1).split(",")(0).substring(7,inv.getInvImg().toString.substring(1,inv.getInvImg().toString.length-1).split(",")(0).length-1)' alt="" width="50"></td>
                <td>@(inv.getStartAt().toString().substring(0,16))</td>
                <td>@(inv.getEndAt().toString().substring(0,16))</td>
                <td>
                    @if(inv.getState()=="Y") {正常}
                    @if(inv.getState()=="D") {下架}
                    @if(inv.getState()=="N") {删除}
                    @if(inv.getState()=="K") {售空}
                    @if(inv.getState()=="P") {预售}
                </td>
                <td>@inv.getItemPrice()</td>
                <td>@inv.getItemSrcPrice()</td>
                <td>@inv.getItemDiscount()</td>
            </tr>
            }
        </table>
        <!--主题-->
        <table class="table table-bordered table-hover table-theme">
                <tr>
                        <th>选择主题</th>
                        <th>主题ID<span class="sort-topic glyphicon glyphicon-chevron-up"></span></th>
                        <th>主题图片</th>
                        <th>开始时间<span class="sort-topic glyphicon glyphicon-chevron-up"></span></th>
                        <th>结束时间<span class="sort-topic glyphicon glyphicon-chevron-up"></span></th>
                </tr>
                @for(theme <- themeList) {
                <tr>
                        <td><input type="radio" name="selectTheme"></td>
                        <td>@theme.getId()</td>
                        <td><img class="main-img" src='@url@theme.getThemeMasterImg().toString.substring(1,theme.getThemeMasterImg().toString.length-1).split(",")(0).substring(7,theme.getThemeMasterImg().toString.substring(1,theme.getThemeMasterImg().toString.length-1).split(",")(0).length-1)' alt="" width="50"></td>
                        <td>@theme.getStartAt()</td>
                        <td>@theme.getEndAt()</td>
                </tr>
                }
        </table>
        <!--主题-->
        <table class="table table-bordered table-hover table-pin">
                <tr>
                        <th>拼购ID</th>
                        <th>拼购标题</th>
                        <th>拼购图片</th>
                        <th>开始时间<span class="sort-topic glyphicon glyphicon-chevron-up"></span></th>
                        <th>拼购状态</th>
                        <th>最低价</th>
                        <th>原价</th>
                        <th>最低折扣</th>
                </tr>
                @for(pin <- pinList){
                <tr>
                    <td><input type="radio" name="selectPinSku"></td>
                    <td>@pin(0)</td>
                    <td>@pin(1)</td>
                    <td> <img class="main-img" src="@url@pin(2)" alt="" width="50"></td>
                    @if(pin(3)!=null){<td>@(pin(3).toString().substring(0,16))</td>}
                    <td>
                        @if(pin(4)=="Y") {正常}
                        @if(pin(4)=="D") {下架}
                        @if(pin(4)=="N") {删除}
                        @if(pin(4)=="K") {售空}
                        @if(pin(4)=="P") {预售}
                    </td>
                    <td>@pin(5)</td>
                    <td>@pin(6)</td>
                    <td>@pin(7)</td>
                </tr>
                }
        </table>
</div>

<div class="goods-img-bg">
        <div class="goods-bg"></div>
        <div class="goods-img">
                <button type="button" class="close" aria-label="Close" style="position: absolute;right: 283px;top: -18px;"><span aria-hidden="true">&times;</span></button>
        </div>
</div>

</body>
</html>