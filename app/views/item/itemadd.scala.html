@import play.i18n._
@(lang:String="cn", brandsList:List[entity.Brands], catesParentList:List[entity.Cates],uploadURL:String,user:entity.User)

@scripts = {

<!-- UEdit -->
<script type="text/javascript" charset="utf-8" src="/assets/editorphp/ueditor.config.js"></script>
<script type="text/javascript" charset="utf-8" src="/assets/editorphp/ueditor.all.js"></script>
<!--建议手动加在语言，避免在ie下有时因为加载语言失败导致编辑器加载失败-->
<!--这里加载的语言文件会覆盖你在配置项目里添加的语言类型，比如你在配置项目里配置的是英文，这里加载的中文，那最后就是中文-->
<script type="text/javascript" charset="utf-8" src="/assets/editorphp/lang/zh-cn/zh-cn.js"></script>
<script type="text/javascript" charset="utf-8" src="/assets/editorphp/lang/en/en.js"></script>


<link href="/assets/css/bootstrap-datetimepicker1.css" rel="stylesheet">
<link rel="stylesheet" href="/assets/css/slider.css"/>
<link rel="stylesheet" href="/assets/css/item.css"/>
<script src="/assets/js/bootstrap.min.js"></script>
<script src="/assets/js/moment-with-locales.js"></script>
<script src="/assets/js/bootstrap-datetimepicker1.js"></script>
<script src="/assets/js/item.js"></script>
<script>window.uploadURL = '@uploadURL'</script>
<script>
    function ShowModal(obj) {
        var sharedObject = {};
        sharedObject.obj = obj;
        //编辑SKU
        if(obj.tagName=="TD"){
            var trData = $(obj).parent().parent();
            console.log(trData);
            //var tdindex = $(table).find("tr").index($(obj).parent())-1;
            //sharedObject.tdindex = tdindex;
        }
        if (window.showModalDialog) {
            var retValue = showModalDialog("/comm/pop", sharedObject, "dialogWidth:1200px; dialogHeight:8900px; dialogLeft:300px;");
            if (retValue) {
                UpdateFields(retValue);
            }
        }
        else {
            // for similar functionality in Opera, but it's not modal!
            var modal = window.open ("/comm/pop", null, "width=1200,height=900,left=300,modal=yes,alwaysRaised=yes", null);
            modal.dialogArguments = sharedObject;
        }
    }

    var table = $("<table class='table table-bordered' id='inventory'>");

    function UpdateFields(obj){
        $(table).appendTo($(".sku-info"));
        var objth = $(obj.trh).find("th");
        var objtd = $(obj.trd).find("td");
        if($(table).find("th").length!==0){
            var trd = $("<tr>").appendTo(table);
            for(var i=0;i<objth.length;i++){
//                if(objth[i].innerHTML=="颜色"||objth[i].innerHTML=="尺寸"||objth[i].innerHTML=="现价"||objth[i].innerHTML=="库存区域"){
//                    $(objtd[i]).appendTo(trd);
//                }
                $(objtd[i]).appendTo(trd);
            }
        }else{
            var trh = $("<tr>").appendTo(table);
            var trd = $("<tr>").appendTo(table);
            for(var i=0;i<objth.length;i++){
//                if(objth[i].innerHTML=="颜色"||objth[i].innerHTML=="尺寸"||objth[i].innerHTML=="现价"||objth[i].innerHTML=="库存区域"){
//                    $(objth[i]).appendTo(trh);
//                    $(objtd[i]).appendTo(trd);
//                }
                $(objth[i]).appendTo(trh);
                $(objtd[i]).appendTo(trd);
            }
        }
    }

    $(function(){
        $(function () {
            $('#datetimepicker1').datetimepicker({
                locale: 'zh-cn',
                format:'YYYY-MM-DD HH:mm:ss'
            });
            $('#datetimepicker2').datetimepicker({
                locale: 'zh-cn',
                format:'YYYY-MM-DD HH:mm:ss'
            });
        });
    })
</script>
}

@import java.lang.String; var title=Messages.get(new Lang(Lang.forCode(lang)),"item.add.prodsAddTitle")

@layout(lang=lang,title=title,user=user)(scripts) {

<div style="width: 50%;margin: 10px auto;display:none;" class="alert alert-success" role="alert">
    <strong>Well done!</strong>
    @if(flash.containsKey("success")) {
    @flash.get("success")
    }
    <span class="close" aria-label="Close"><span aria-hidden="true">&times;</span></span>
</div>

<div class="mbread" style="width:80%">
    <div class="bread-path">
        <span class="index">@Messages.get(new Lang(Lang.forCode(lang)),"page.head.path.title")</span>
        <a href="/@lang/front"><span class="current">@Messages.get(new Lang(Lang.forCode(lang)),"nav.home")</span></a>
        <span class="icon-path">&gt;</span>
        <span class="current">@Messages.get(new Lang(Lang.forCode(lang)),"nav.products")</span>
        <span class="icon-path">&gt;</span>
        <span>@Messages.get(new Lang(Lang.forCode(lang)),"nav.products.menu2")</span>
    </div>
</div>
<div class="wrap-slider">
    <div class="page-title">
        <span class="title-name">@Messages.get(new Lang(Lang.forCode(lang)),"item.add.prodsAddTitle")</span>
    </div>
    <div class="usercenter-option">
        <div class="user-state fl">@Messages.get(new Lang(Lang.forCode(lang)),"themes.slider.state1")</div>
        <div  id="submitItem" class="btn-blue btn-form fr ml15 saveItem">@Messages.get(new Lang(Lang.forCode(lang)),"themes.slider.save")</div>
        <div id="cancel" class="btn-white btn-form fr ml20">@Messages.get(new Lang(Lang.forCode(lang)),"themes.slider.cancel")</div>
        <span id="js-userinfo-error" class="mt20 alt fr"></span>
    </div>
    <div class="row">
        <form class="form-horizontal" method="post"   enctype="multipart/form-data">
            <div class="upinfo">
                <!-- 商品基本信息 -->
                <input type="hidden" id="itemId" name="itemId" value=""/>
                <h4 class="h4-custom-hmm">@Messages.get(new Lang(Lang.forCode(lang)),"item.add.basics")</h4>
                <div class="form-group">
                    <label class="col-sm-1 control-label" ><div class="r" style="padding:3px;"> *</div><div class="r">@Messages.get(new Lang(Lang.forCode(lang)),"item.add.cate")</div></label>
                    <div class="col-sm-2">
                        <select class="form-control" id="categorySelect" name="pcateId">
                            <option value="">@Messages.get(new Lang(Lang.forCode(lang)),"item.add.pleaseSelect")</option>
                            @for(cates <- catesParentList) {
                            <option value="@cates.getCateId()">@cates.getCateNm()
                            </option>
                            }
                        </select>
                    </div>
                    <div class="col-sm-2" id="divDynamicSubCates">
                        <select class="form-control" id='categorySubSelect' name="cateId">
                            <option value="">@Messages.get(new Lang(Lang.forCode(lang)),"item.add.pleaseSelect")</option>
                        </select>
                    </div>
                    <label class="col-sm-1 control-label" ><div class="r" style="padding:3px;"> *</div><div class="r">@Messages.get(new Lang(Lang.forCode(lang)),"item.add.brand")</div></label>
                    <div class="col-sm-2">
                        <select class="form-control" id="bandSelect" name="brandId">
                            <option value="">@Messages.get(new Lang(Lang.forCode(lang)),"item.add.pleaseSelect")</option>
                            @for(b <- brandsList) {
                            <option value="@b.getBrandId()">@b.getBrandNm()
                            </option>
                            }
                        </select>
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-sm-1 control-label" ><div class="r" style="padding:3px;"> *</div><div class="r">商品标题</div></label>
                    <div class="col-sm-4">
                        <input type="text" class="form-control" id="itemTitle" name="itemTitle">
                    </div>
                    <label class="col-sm-1 control-label" ><div class="r" style="padding:3px;"> *</div><div class="r">@Messages.get(new Lang(Lang.forCode(lang)),"item.add.merchName")</div></label>
                    <div class="col-sm-2">
                        <input type="text" class="form-control" id="supplyMerch" name="supplyMerch">
                    </div>
                </div>
                <!--<div class="form-group">-->
                    <!--<label class="col-sm-1 control-label"><div class="r" style="padding:3px;"> *</div><div class="r">销售期限</div></label>-->
                    <!--<div class="col-sm-3">-->
                        <!--<div class="input-group date" id='datetimepicker1'>-->
                            <!--<input class="form-control col-sm-2"  type="text"  id="onShelvesAt" name="onShelvesAt">-->
                            <!--<span class="input-group-addon"><span class="glyphicon glyphicon-calendar"></span></span>-->
                        <!--</div>-->
                    <!--</div>-->
                    <!--<div class="col-sm-1" style="font-size: 24px;width:50px;margin-left:40px;margin-right:40px;">~</div>-->
                    <!--<div class="col-sm-3">-->
                        <!--<div class="input-group date" id='datetimepicker2'>-->
                            <!--<input class="form-control col-sm-2"  type="text"  id="offShelvesAt" name="offShelvesAt">-->
                            <!--<span class="input-group-addon"><span class="glyphicon glyphicon-calendar"></span></span>-->
                        <!--</div>-->
                        <!--<div id="warn-date" style="color:red; margin-left:260px;margin-top:-30px; width:100px;"></div>-->
                    <!--</div>-->
                <!--</div>-->
                <!-- 商品库存信息-->
                <h4 class="h4-custom-hmm">商品库存信息</h4>
                <!--<div class="form-group">-->
                    <!--<div class="col-sm-12">-->
                        <!--<div class="goods-info1">-->
                            <!--<table class="table table-bordered qubian inv" id="inventory">-->
                                <!--<tr>-->
                                    <!--<th>设为主商品</th>-->
                                    <!--<th>颜色分类</th>-->
                                    <!--<th>尺寸分类</th>-->
                                    <!--<th>重量(整数:克)</th>-->
                                    <!--<th>库存数量</th>-->
                                    <!--<th>现价(￥)</th>-->
                                    <!--<th>原价(￥)</th>-->
                                    <!--<th>成本价(￥)</th>-->
                                    <!--<th>折扣</th>-->
                                    <!--<th>限购数量</th>-->
                                    <!--<th>运费设置</th>-->
                                    <!--<th>税率设置</th>-->
                                    <!--<th>税率(整数)</th>-->
                                    <!--<th>行邮税号</th>-->
                                    <!--<th>库存区域</th>-->
                                    <!--<th>报关单位</th>-->
                                    <!--<th>海关商品备案号</th>-->
                                    <!--<th>主图(一张)</th>-->
                                    <!--<th>详情页预览图(最多6张)</th>-->
                                    <!--<th style="display:none">状态</th>-->
                                    <!--<th class="add-goods add">添加商品</th>-->
                                <!--</tr>-->
                                <!--<tr>-->
                                    <!--<td>-->
                                        <!--<input type="radio" name="orMasterInv" checked="checked" class="master-radio"/>-->
                                    <!--</td>-->
                                    <!--<td>-->
                                        <!--<input type="text" name="itemColor">-->
                                    <!--</td>-->
                                    <!--<td>-->
                                        <!--<input type="text" name="itemSize">-->
                                    <!--</td>-->
                                    <!--<td>-->
                                        <!--<input type="text" name="invWeight">-->
                                    <!--</td>-->
                                    <!--<td>-->
                                        <!--<input type="text" name="amount">-->
                                    <!--</td>-->
                                    <!--<td>-->
                                        <!--<input type="text" name="itemPrice">-->
                                    <!--</td>-->
                                    <!--<td>-->
                                        <!--<input type="text" name="itemSrcPrice">-->
                                    <!--</td>-->
                                    <!--<td>-->
                                        <!--<input type="text" name="itemCostPrice">-->
                                    <!--</td>-->
                                    <!--<td>-->
                                        <!--<input type="text" name="itemDiscount">-->
                                    <!--</td>-->
                                    <!--<td>-->
                                        <!--<input type="text" name="restrictAmount">-->
                                    <!--</td>-->
                                    <!--<td>-->
                                    <!--</td>-->
                                    <!--<td>-->
                                        <!--<select class="trset" id="1">-->
                                            <!--<option value="">请选择</option>-->
                                            <!--<option value="S">标准税率</option>-->
                                            <!--<option value="F">免税</option>-->
                                            <!--<option value="D">自定义</option>-->
                                        <!--</select>-->
                                    <!--</td>-->
                                    <!--<td>-->
                                        <!--<input type="text" name="postalTaxRate" readOnly>-->
                                    <!--</td>-->
                                    <!--<td>-->
                                        <!--<input type="text" name="postalTaxCode" readOnly>-->
                                    <!--</td>-->
                                    <!--<td>-->
                                        <!--<select name="invArea">-->
                                            <!--<option value="H">杭州保税仓备案</option>-->
                                            <!--<option value="HZ">杭州保税仓直邮</option>-->
                                            <!--<option value="G">广州保税仓备案</option>-->
                                            <!--<option value="GZ">广州保税仓直邮</option>-->
                                            <!--<option value="S">上海保税仓备案</option>-->
                                            <!--<option value="SZ">上海保税仓直邮</option>-->
                                            <!--<option value="K">海外直邮</option>-->
                                        <!--</select>-->
                                    <!--</td>-->
                                    <!--<td>-->
                                        <!--<select name="invCustoms">-->
                                            <!--<option value="shanghai">上海海关</option>-->
                                            <!--<option value="hangzhou">杭州海关</option>-->
                                            <!--<option value="guangzhou">广州海关</option>-->
                                        <!--</select>-->
                                    <!--</td>-->
                                    <!--<td id="rec1">-->
                                        <!--<div class="record"><span>杭州 <input type="text" value="" name="recordHZ" style="width:70%;"></span></div>-->
                                        <!--<div class="record"><span>广州 <input type="text" value="" name="recordGZ" style="width:70%;"></span></div>-->
                                        <!--<div class="record"><span>上海 <input type="text" value="" name="recordSH" style="width:70%;"></span></div>-->
                                    <!--</td>-->
                                    <!--<td class="list-img">-->
                                        <!--<div id="galleryM1">-->
                                        <!--</div>-->
                                        <!--<span class="add" id="masterImgAddM1">＋-->
                                            <!--<input type="file" id="M1" name="invImg" class="hidden1" value="" accept="image/gif, image/jpeg, image/webp, image/png"/>-->
                                        <!--</span>-->
                                    <!--</td>-->
                                    <!--<td width="146" class="preview-img">-->
                                        <!--<div id="galleryP1">-->
                                        <!--</div>-->
                                        <!--<span class="add" id="preImgAddP1">＋-->
                                            <!--<input type="file" id="P1" name="itemPreviewImgs" class="hidden1" value="" accept="image/gif, image/jpeg, image/webp, image/png">-->
                                        <!--</span>-->
                                    <!--</td>-->
                                    <!--<td style="display:none">-->
                                    <!--</td>-->
                                    <!--<td class="del">-->
                                        <!--删除-->
                                        <!--<input type="hidden" value=""/>-->
                                    <!--</td>-->
                                <!--</tr>-->
                            <!--</table>-->
                        <!--</div>-->
                    <!--</div>-->
                <!--</div>-->
                <!--<div class="form-group" style="margin-top:-100px;">-->
                    <!--<label class="col-sm-1 control-label" >-->
                        <!--<div id="warn-inv" style="color:red;width:200px;margin-left:-80px;"></div>-->
                        <!--<div id="warn-num" style="color:red;width:200px;margin-left:-80px;"></div>-->
                        <!--<div id="warn-mas" style="color:red;width:200px;margin-left:-80px;"></div>-->
                        <!--<div id="warn-pre" style="color:red;width:200px;margin-left:-80px;"></div>-->
                        <!--<div id="warn-cho" style="color:red;width:200px;margin-left:-80px;"></div>-->
                    <!--</label>-->
                <!--</div>-->
                <h4><button type="button" class="btn btn-primary add-guige" onclick="ShowModal(this)">添加规格</button></h4>
                <div class="form-group">
                    <div class="col-sm-8">
                        <div class="sku-info">
                        </div>
                    </div>
                </div>
                <h4 class="h4-custom-hmm">商品设置</h4>
                <div class="form-group">
                    <label class="col-sm-1 control-label" ><div class="r">重要通告</div></label>
                    <div class="col-sm-5">
                        <textarea rows="6"  class="form-control" id="itemNotice" name="itemNotice"></textarea>
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-sm-1 control-label"><div class="r" style="padding:3px;"> *</div>优惠信息</label>
                    <div class="form-group">
                        <div class="col-sm-3">
                            <table class="table table-bordered pub" id="publicityTab">
                                <tr>
                                    <td><input type="text" id="publicity"/></td>
                                    <td class="add1">添加</td>
                                </tr>
                            </table>
                        </div>
                        <div id="warn-pub" style="color:red;margin-top:10px;"></div>
                    </div>

                </div>

                <!-- 商品详细信息-->
                <h4 class="h4-custom-hmm">@Messages.get(new Lang(Lang.forCode(lang)),"item.add.details")</h4>

                <!--<div class="form-group">-->
                    <!--<label class="col-sm-1 control-label"><div class="r" style="padding:3px;">*</div><div class="r">主题宣传图</div><div style="margin-top:20px;margin-right:30px;">(一张)</div></label>-->
                    <!--<div class="col-sm-2">-->
                        <!--<div class="master-img" style="border:1px solid #ccc; height:80px;">-->
                            <!--<div id="galleryT" style="margin-top:15px;margin-left:10px;">-->
                            <!--</div>-->
                            <!--<span class="add" id="masterThImgAdd" style="margin-top:30px;margin-left:10px;">＋-->
                                <!--<input type="file" id="T" class="hidden1" value="" accept="image/gif, image/jpeg, image/webp, image/png"/>-->
                            <!--</span>-->
                        <!--</div>-->
                    <!--</div>-->
                    <!--<label class="col-sm-1 control-label"><div class="r" style="padding:3px;"> *</div><div class="r">@Messages.get(new Lang(Lang.forCode(lang)),"item.add.detailImgs")</div></label>-->
                    <!--<div class="col-sm-4">-->
                        <!--<div class="detail-img" style="border:1px solid #ccc;">-->
                            <!--<div id="galleryD" style="">-->
                            <!--</div>-->
                            <!--<span class="add" style="margin:25px 5px;">＋-->
                                <!--<input type="file" id="D" class="hidden1" value="" accept="image/gif, image/jpeg, image/webp, image/png"/>-->
                            <!--</span>-->
                        <!--</div>-->
                        <!--<div id="warn-masthimg" style="color:red;margin-top:-70px; margin-left:500px;width:120px;"></div>-->
                        <!--<div id="warn-detailimg" style="color:red;margin-top:10px; margin-left:500px;width:120px;margin-bottom:50px;"></div>-->
                    <!--</div>-->
                <!--</div>-->

                <div class="form-group">
                    <label class="col-sm-1 control-label"><div class="r" style="padding:3px;"> *</div><div class="r">商品参数</div></label>
                    <div class="col-sm-7" style="margin-top:15px;">
                        <table class="table table-bordered qubian feature" id="tabFea">
                            <tr>
                                <td width="30%">参数名</td>
                                <td width="60%">参数值</td>
                                <td class="add">@Messages.get(new Lang(Lang.forCode(lang)),"item.add.add")</td>
                            </tr>
                            <tr>
                                <td><input type="text" name="attrN"/></td>
                                <td><input type="text" name="attrV"/></td>
                                <td class="del" >@Messages.get(new Lang(Lang.forCode(lang)),"item.add.delete")</td>
                            </tr>
                        </table>
                    </div>
                    <div id="warn-attr" style="color:red; margin-left:0px;margin-top:15px;"></div>
                </div>
                <div class="form-group">
                    <label class="col-sm-1 control-label"><div class="r" style="padding:3px;"> *</div><div class="r">商品详情</div></label>
                    <div class="col-sm-7">
                        <script id="editor" type="text/plain" style="height:500px;"></script>
                    </div>
                </div>
            </div>
        </form>
    </div>
</div>

<div class="goods-img-bg">
    <div class="goods-bg"></div>
    <div class="goods-img">
        <button type="button" class="close" aria-label="Close"><span aria-hidden="true">&times;</span></button>
    </div>
</div>

}


<script type="text/javascript">
    //实例化编辑器
    //建议使用工厂方法getEditor创建和引用编辑器实例，如果在某个闭包下引用该编辑器，直接调用UE.getEditor('editor')就能拿到相关的实例
    var ue = UE.getEditor('editor');
</script>

